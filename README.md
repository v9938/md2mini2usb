# MD/CyberStick to USB Converter<BR>MegaDrivemini2 Cyberstickモード対応版  

![装置イメージ](./img/img001.jpg)  

メガドライブ対応コントローラ(3B/6B),または SHARP CyberStick(CZ-8NJ2),マイコンソフト XE-1AJを  
DirectInput方式のUSBコントローラとして使える様にするコンバータです。

スイッチ切り替えで2つのコントローラ互換品として使用可能です。  
・SEGA ファイティングパッド6B  
・マイコンソフト　サイバースティック XE1AJ1-USB  

なお現販売品は、先行販売版と言う事でXE1AJ-USBモードは仮実装です。  
ユーザにてファームウェアアップデートを実施する事で同機能を使用できる様になります。  

※XE1AJ1-USBモードはMegaDrive2mini/Genesis2mini/PC接続のみ対応  

## ■ 使用方法

1. D-SUB9Pin側に使いたいコントローラを接続します。
2. コントローラモード切替スイッチを適切なモードにセットします。
3. USBコネクタにケーブルを接続して、使用する機器に接続します。  

MegaDrive2miniでCyberStickモードを使う場合はCONTROLLER2に接続してください。　　

**メガドライブコントローラとCyberStickでは、電源ピンの位置が異なります。**  
**コントローラモード切替スイッチは、本機の電源が入っていない状態で切り替えてください。** 

| メガドライブコントローラモード | Cyberstickモード(ATARI) |  
| - | - |
| ![スイッチ位置MD](./img/img002-2.jpg) | ![スイッチ位置ATARI](./img/img002-1.jpg) |


## ■ ボタン配置について

各オリジナルコントローラのボタン配置に準拠しています。  
Windows PC上での配置は下記の通りです。

### メガドライブコントローラモード(SEGA ファイティングパッド6B互換モード)  

| メガドライブコントローラ | USBコントローラ配置 | 制限事項など |  
| - | - | - |
| スティック | Ｘ軸Ｙ軸 |  |
| Ａ、Ｂ、Ｃボタン | ボタン３、２、６|  |
| Ｘ、Ｙ、Ｚボタン | ボタン４、１、５ | 6ボタン対応コントローラーのみ有効 |
| ＭＯＤＥボタン | ボタン７ | 6ボタン対応コントローラーのみ有効 |
| スタートボタン | ボタン８ |  |

### CyberStickモード(XE1AJ1-USB互換モード)  

| CyberStick | USBコントローラ配置 | 制限事項など |  
| - | - | - |
| スティック | Ｘ軸Ｙ軸 |  |
| スロットル前後 | Ｚ回転 |  |
| トリガボタンＡ、Ｂ、Ｃ | ボタン１、２、３ |  |
| トリガボタンＤ、Ｅ１、Ｅ２ | ボタン４、５、６ |  |
| トリガボタンＡ'、Ｂ' | ボタン１、２ |  |
| セレクト、スタートボタン | ボタン７、８ | CZ-8NJ2のデジタルモードでは使用できません。 |

### CyberStickモード(SEGA ファイティングパッド6B互換モード　※Aボタンを押しながらUSBを接続)  

| CyberStick | USBコントローラ配置 | 制限事項など |  
| - | - | - |
| スティック | Ｘ軸Ｙ軸 |  |
| スロットル前後 | － |  |
| トリガボタンＡ、Ｂ、Ｃ | ボタン３、２、７ |  |
| トリガボタンＤ、Ｅ１、Ｅ２ | ボタン４、１、６ |  |
| トリガボタンＡ'、Ｂ' | ボタン３、２ |  |
| セレクト、スタートボタン | ボタン９、１０ | CZ-8NJ2のデジタルモードでは使用できません。 |

## ■ 利用上の注意点  

オリジナルのコントローラは製造後２０年以上経っています。  
動作不安定の場合はコントローラが正常に必ず確認をお願いします。  

コントローラモード切替スイッチ設定を誤ると回路保護のため一定時間電源が入らなくなる場合があります。  
その場合は、数分程度放置後再度接続する様にお願いします。  

## ■ 頒布について  

本製品はBoothおよび家電のKENちゃん、BEEPさんにて販売しています。  
(Boothの発送は、週末にまとめて発送になるため、お急ぎの方は他ショップを利用ください)

### 家電のKENちゃん：  
URL未定  

### BEEP：  
URL未定  

### Booth: (週１回の発送)  
<https://ifc.booth.pm/items/4229656>  

## ■ ファームウェアアップデートについて(頒布版のみ対応)

本製品はファームウェアアップデートに対応しています。  
ファームウェアアップデートについては、Windows PCが必要になります。  

1. コントローラの［Cボタン］を押します。（コントローラモードスイッチはどちらでも可）
2. Windows PCに接続します。
3. デバイス接続音がしたら、コントローラのボタンを放してください。
4. Firmware Updateソフトを実行します。

ファームウェアVersionについては下記手順で確認可能です。

1. 接続しているコントローラを外します。
2. コントローラモード切替スイッチをCyber側にします。
3. Windows PCに接続します。
4. Version確認ソフト(Link)で確認します。

謝辞：  
ファームウェアアップデート機能には、 莎華(SAKA)さんのHID Bootloader (pic18Non-J)を利用しています。  
<http://www3.airnet.ne.jp/saka/hardware/pic-bootloader/pic-bootloader01.html>

## ■ XE1AJ1-USB設定ソフトについて（予定）

**本機能についてマイコンソフトさんへの問い合わせは絶対行わない様にお願いします**  
マイコンソフトさんのXE1AJ1-USB設定ソフトにて、純正同様にセンターの遊び範囲、移動比率の設定などが可能です。
設定時は、コントローラモード切替スイッチをCyber側にし、Windows PCに接続してください。  

## ■ ボタン配置について

ソフト的には、ボタン配置を変更して、保存している仕組みを有しています。  
※XE1AJ-USB販売後に専用ソフトで変更できる様にする予定です。

## ■ GitHub公開データについて

ソフトウェアのコンパイルにはMicrochipのUSB library 'mla v2017_03_06'が必要です。  
頒布版とコードが異なりファームウェアアップデート機能が非対応になります。  

自作される場合は、秋月電子さんのマイコンボードを使うと良いと思います。  
<http://akizukidenshi.com/catalog/g/gK-05499/>  

## ■ 本機の仕様について

|仕様  |  |
| - | - |
| 使用マイコン | Microchip PIC18F14K50 |
| 定格 | 5V 50mA (ポリヒューズ250mA)|
| コントローラ規格 | USB2.0 HIDゲームコントローラ準拠(Direct Input方式) |
| キースキャン間隔<BR>(SEGA ファイティングパッド6B互換モード) | 10ms(設定値)/8ms(実測値) |  
| キースキャン間隔<BR>(XE1AJ-USB互換モード時) | 8ms(設定値)/8ms(実測値) |
| 対応コントローラ | メガドライブ規格準拠コントローラ<BR>MSX規格準拠コントローラ |
| 動作確認環境 | Windows10/7<BR>SEGA MegaDrive mini/Genesis mini<BR>SEGA MegaDrive2 mini/Genesis2 mini |
| 動作確認済みコントローラー | SEGA SJ-3500<BR>SEGA SJ-6000<BR>マイコンソフト XE-1ST2<BR>マイコンソフト XE-1AP (PERSONAL COMPUTERモード)<BR>SHARP CZ-8NJ2 (CYBER STICK)<BR>FUJITSU FMT-PD102 |

## ■ 先行販売版について
先行配布版については、XE1AJ-USBモードの実装はダミー実装です。  
ファームウェアをユーザでやっていただかないとメガドライブ2miniでは動作できません。 
ご了承ください

